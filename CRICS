# Prep for building
apt install automake libssl-dev
git clone https://github.com/pepa65/pure-ftpd
cd pure-ftpd

# Building (with Virtual Users, Encrypted file transfer, and pure-ftpwho):
./autogen.sh 
./configure --with-puredb --with-tls --with-ftpwho
cp _pure-ftpd.conf pure-ftpd.conf
sudo make install-strip
# Symlink the domain certificate to /etc/ssl/private/pure-ftpd.pem

# Prep users
sudo groupadd pureftp
sudo useradd -g pureftp -d /dev/null -s /bin/false pureftp

# Start (chroot everyone, daemonize, list dotfiles, only auth-users, no whois, make home, PureDB-auth):
sudo /usr/local/sbin/pure-ftpd -A -B -D -E -H -j -lpuredb:/etc/pureftpd.pdb
# Add this to /root/atreboot

# Stop:
sudo pkill -x pure-ftpd

# Add/modify users with `pure.csv` file with lines: <username>,<password>
./purecsv

# Users can also be edited directly:
sudo nano /etc/pureftpd.passwd

# Commit changes = make database (no restart needed):
pure-pw mkdb

# Add one user:
sudo pure-pw useradd <username> -u pureftp -d /home/pureftp/<username>
